# PolygonGeometryOperation
---

#### 实验目的
* 实现对于多边形的填充、裁剪、平移、旋转、缩放功能
#### 环境
* Jar 运行环境 JRE 12
* IDE IntelliJ
#### 交互
* 点击菜单栏 创建 - 创建，即可进行多边形的创建，鼠标在画板上点击一次即定义多边形的一个顶点，点击形成的顶点形成闭环后(最后一次点击与第一次点击位置很近会自动判断为同一点)会弹出对话框，可以在对话框中选择边框和填充的颜色。直接关闭对话框则认为多边形已创建完成，会完成填充并跳转至移动模式；若点击继续则需要继续创建闭环来构成多边形的外圈或内圈。
* 点击菜单栏 变换 - 移动，在多边形已经创建的情况下，直接拖动鼠标就可以拖动多边形移动。
* 点击菜单栏 变换 - 缩放，在多边形已经创建的情况下，按压键盘 "+" 放大，"-" 缩小，缩放中心为多边形横纵坐标极值的均值。
* 点击菜单栏 变换 - 旋转，在多边形已经创建的情况下，按压键盘方向键 "up" 逆时针旋转，"down" 顺时针旋转，旋转中心为多边形横纵坐标极值的均值。
* 点击菜单栏 变换 - 裁剪，在多边形已经创建的情况下，鼠标在画板上点击一次即定义裁剪多边形的一个顶点，裁剪多边形的创建过程类似于主多边形(无颜色选择)。
#### 使用算法
* 多边形的填充: 扫描线算法
* 多边形的裁剪: Weiler - Atherton 算法
#### 结果与问题分析
* 创建
    * 该实现适用于任意多边形
    * 根据点击顺序，每一个点会依次添加入代表一个环的 ArrayList，而所有代表环的 ArrayList 会作为代表多边形的 ArrayList 的元素。对于环而言该存储并未区分内外环，旋转顺序等
    * 考虑到多边形坐标整型存储可能会导致缩放、旋转过程中多边形出现明显的变形问题，多边形各顶点的坐标的数据类型为 double
    * 由于 Java 的 LinkedList 存在一些限制，扫描线算法自行创建了链表方便进行各种插入删除操作
* 平移，缩放，旋转
    * 测试过程中无明显 bug 
* 裁剪
    * 该实现适用于任意多边形的各个环皆存在交点的情况
    * Weiler - Atherton 虽适用于使用任意多边形裁剪任意多边形，但基本算法只适用于主多边形以及裁剪多边形的各个环上都有交点的情况。对于任意多边形的裁剪而言，部分或全部环不存在交点的情况分类讨论下情况很多(特别是内环不止一个的情况下)。因为未能找到较好的处理方法，虽然算法已经实现了抽取出没有交点的环，但尚未对此类情况进行处理
    * 因为多边形的创建过程并未对内环、外环，输入的旋转方向作出限制或判断。所以裁剪过程中首先需要对主多边形和裁剪多边形的环的性质做出判断
    * 多边形新顶点表的创建过程并未对入点和出点进行判断，因为在之后的跟踪过程中入点和出点会交替出现，只需要对每一次跟踪的循环过程中的第一个交点进行判断即可
    * 对于主多边形和裁剪多边形边重叠的情况，只需要在求交点时对于平行线段一律按没有交点处理即可
    * 寻找出多边形没有交点的环，可以对新顶点表进行遍历，找到构成闭环的一系列不含交点的点即可






